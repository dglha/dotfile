"use strict";!function(e,t,n,o){function r(e){return String(e).replace(/[&<>"'\/]/g,function(e){return c[e]})}t||(t={},e?e[o]=t:n[o]=t);var i,a,c,s={},l={},d=/[[\]{}()*+?.\\|^$\-,&#\s]/g;c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},t.define=function(e){var t=void 0,n=void 0,o=void 0,c=void 0,u=[];for(t in e){o=e[t].codes;for(n in o)c=o[n],s[c]=t,s[r(c)]=t,0===n&&(l[c]=t)}var f=[],m=void 0;for(m in s)s.hasOwnProperty(m)&&f.push(m);f.sort(function(e,t){return t.length-e.length});for(m in f)u.push("("+f[m].replace(d,"\\$&")+")");a=new RegExp(u.join("|"),"g"),i=e},t.replace=function(e,n){return e.replace(a,function(e){var o=s[e];return(n||t.tpl)(o,e)})},t.toString=function(e){var n=void 0,o="",r=void 0;for(n in l)r=l[n],o+=(e||t.tpl)(r,n);return o},t.tpl=function(e,t){var n="juno_okyo"===e?"images/icon-16":"images/emoticons/"+e;if(n+=e.startsWith("vl-")?".gif":".png","user_pic"===e)try{n=document.querySelector('[id^="profile_pic_header_"]').src}catch(o){}else n=chrome.extension.getURL(n);var r=e.startsWith("vl-")?20:16;return'<span class="_47e3 _5mfr j2team_emoticon" title="'+e+'"><img aria-hidden="true" class="img" src="'+n+'" height="'+r+'" width="'+r+'"><span aria-hidden="true" class="_7oe">'+t+"</span></span>"},t.define({"fb-pacman-flat":{codes:[":v",":V"]},"fb-colonthree-flat":{codes:[":3"]},juno_okyo:{codes:[":juno:",":juno_okyo:",":JUNO:",":JUNO_OKYO:",":manhtuan:"]},user_pic:{codes:[":me:"]},"vl-16":{codes:[":t",":T"]},"vl-17":{codes:[":z",":Z"]},"vl-27":{codes:[":u",":U"]}})}("undefined"!=typeof jQuery?jQuery:null,"undefined"!=typeof exports?exports:null,window,"emoticons"),function(){var e=".facebook.com",t=".messenger.com",n={TARGET_ID:"pagelet_dock",attachObserver:function(){var e=new MutationObserver(function(e){e.forEach(function(e){for(var t=0,o=e.addedNodes.length;t<o;t++)n.checkElement(e.addedNodes[t])})}),t=document.getElementById(n.TARGET_ID);t&&e.observe(t,{attributes:!1,childList:!0,characterData:!1,subtree:!0})},checkElement:function(e){if(1===e.nodeType){var t=e.classList;if(t.contains("_4tdt")||t.contains("_5wd4"))n.processElement(e);else if("SPAN"===e.nodeName)e.firstElementChild&&"SPAN"===e.firstElementChild.nodeName&&n.processElement(e);else if("DIV"===e.nodeName){var o=e.firstElementChild;o&&"SPAN"===o.nodeName&&o.hasAttribute("title")&&n.processElement(o)}}},processElement:function(e){var t=null;t="SPAN"===e.nodeName?[e]:e.querySelectorAll("._5yl5 > span");for(var n=0,o=t.length;n<o;n++){var r=t[n],i=r.hasAttribute("title")?r.title:r.textContent,a=emoticons.replace(i);a!==i&&(r.innerHTML=a)}},init:function(){n.attachObserver()}},o={TARGET_ID:"u_0_0",attachObserver:function(){var e=new MutationObserver(function(e){e.forEach(function(e){for(var t=0,n=e.addedNodes.length;t<n;t++){var r=e.addedNodes[t];o.checkElement(r)}})}),t=document.getElementById(o.TARGET_ID);t&&e.observe(t,{attributes:!1,childList:!0,characterData:!1,subtree:!0})},checkElement:function(e){if(1===e.nodeType){var t=e.classList;if("SPAN"===e.nodeName&&t.contains("_3oh-"))o.processElement(e);else if("DIV"===e.nodeName){var n=e.firstElementChild;n&&"SPAN"===n.nodeName&&n.hasAttribute("title")?o.processElement(n):o.processElement(e)}}},processElement:function(e){var t=null;t="SPAN"===e.nodeName?[e]:e.querySelectorAll("span._3oh-");for(var n=0,o=t.length;n<o;n++){var r=t[n];if("H2"!==r.parentNode.nodeName){var i=r.hasAttribute("title")?r.title:r.textContent,a=emoticons.replace(i);a!==i&&(r.innerHTML=a)}}},init:function(){o.attachObserver()}};chrome.storage.sync.get({restore_pacman_emoticon:!1},function(r){r.restore_pacman_emoticon&&(window.location.hostname.includes(e)?n.init():window.location.hostname.includes(t)&&o.init())})}();