"use strict";!function(t,o){o.runtime.sendMessage({cmd:"track_page_view",path:"/custom-block-list.html"}),t(document).ready(function(t){var n=t("#blocklist");o.storage.sync.get({blocklist:null},function(t){null!==t.blocklist&&n.val(t.blocklist)});var l=t("#form");l.submit(function(l){var a=t("#save-btn");a.button("loading");var e=n.val();if(e.length>0){var i=_.uniq(e.split("\n"));e=i.filter(function(t){return t.startsWith("http:")||t.startsWith("https:")||t.startsWith("*://")}).join("\n")}o.storage.sync.set({blocklist:e},function(){setTimeout(function(){a.button("reset")},500),n.val(e).focus(),o.runtime.sendMessage({cmd:"update_custom_blocklist"})}),l.preventDefault()});var a=t("#form-import");a.submit(function(o){var l=t("#import-url").val();if(l.length>7){var a=t("#import-btn");a.button("loading"),t.ajax({url:l,type:"GET",dataType:"default",cache:!1}).always(function(o){200===o.status&&(n.val(n.val()+"\n"+o.responseText),t("#import-url").val("")),a.button("reset"),t("#modal-import").modal("hide")})}o.preventDefault()}),t("#clear-btn").click(function(){n.val("").focus()}),t("#modal-import").on("shown.bs.modal",function(){t("#import-url").focus()}),t("#modal-help, #modal-import").on("hidden.bs.modal",function(){setTimeout(function(){n.focus()},100)})})}(jQuery,chrome);